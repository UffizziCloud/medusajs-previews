(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{38557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collections/[id]",function(){return t(33970)}])},33970:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return w},default:function(){return k},fetchCollectionProducts:function(){return b}});var i=t(47568),r=t(70655),c=t(85893),s=t(55738),a=t(57469),l=t(26042),o=t(42984),u=t(217),d=t(61692),f=t(38948),g=t(15986),x=t(87786),p=t(67294),h=t(97650),m=t(59403),v=function(e){var n=e.collection,t=(0,x.jD1)().cart,i=(0,h.YD)(),r=i.ref,s=i.inView,a=(0,m.N)(["get_collection_products",n.id,null===t||void 0===t?void 0:t.id],(function(e){var i=e.pageParam;return b({pageParam:i,id:n.id,cartId:null===t||void 0===t?void 0:t.id})}),{getNextPageParam:function(e){return e.nextPage}}),v=a.data,j=a.hasNextPage,_=a.fetchNextPage,N=a.isFetchingNextPage,Z=a.isLoading,y=(0,o.Z)({pages:null===v||void 0===v?void 0:v.pages,region:null===t||void 0===t?void 0:t.region});return(0,p.useEffect)((function(){s&&j&&_()}),[s,j]),(0,c.jsxs)("div",{className:"content-container py-6",children:[(0,c.jsx)("div",{className:"mb-8 text-2xl-semi",children:(0,c.jsx)("h1",{children:n.title})}),(0,c.jsxs)("ul",{className:"grid grid-cols-2 small:grid-cols-3 medium:grid-cols-4 gap-x-4 gap-y-8",children:[y.map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(f.Z,(0,l.Z)({},e))},e.id)})),Z&&!y.length&&(0,d.Z)(8).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)})),N&&(0,d.Z)((0,u.Z)(null===v||void 0===v?void 0:v.pages)).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)}))]}),(0,c.jsx)("div",{className:"py-16 flex justify-center items-center text-small-regular text-gray-700",ref:r,children:(0,c.jsx)("span",{ref:r})})]})},j=t(63269),_=t(18481),N=function(){return(0,c.jsxs)("div",{className:"content-container py-6",children:[(0,c.jsx)("div",{className:"animate-pulse mb-8",children:(0,c.jsx)("div",{className:"w-96 h-20 bg-gray-100"})}),(0,c.jsx)("ul",{className:"grid grid-cols-2 small:grid-cols-3 medium:grid-cols-4 gap-x-4 gap-y-8 flex-1",children:(0,d.Z)(8).map((function(e){return(0,c.jsx)("li",{children:(0,c.jsx)(g.Z,{})},e)}))})]})},Z=t(11163),y=t(36492),P=function(){var e=(0,i.Z)((function(e){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,s.pZ.collections.retrieve(e).then((function(e){var n=e.collection;return{id:n.id,title:n.title}}))];case 1:return[2,n.sent()]}}))}));return function(n){return e.apply(this,arguments)}}(),w=!0,b=function(){var e=(0,i.Z)((function(e){var n,t,i,c,a,l,o,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=e.pageParam,t=void 0===n?0:n,i=e.id,c=e.cartId,[4,s.pZ.products.list({limit:12,offset:t,collection_id:[i],cart_id:c})];case 1:return a=r.sent(),l=a.products,o=a.count,u=a.offset,[2,{response:{products:l,count:o},nextPage:o>u+12?u+12:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),E=function(e){var n=e.notFound,t=(0,Z.useRouter)(),i=t.query,r=t.isFallback,s=t.replace,l="string"===typeof i.id?i.id:"",o=(0,y.a)(["get_collection",l],(function(){return P(l)})),u=o.data,d=o.isError,f=o.isSuccess,g=o.isLoading;return n?(a.Q&&s("/404"),(0,c.jsx)(N,{})):(d&&s("/404"),r||g||!u?(0,c.jsx)(N,{}):f?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(j.Z,{title:u.title,description:"".concat(u.title," collection")}),(0,c.jsx)(v,{collection:u})]}):(0,c.jsx)(c.Fragment,{}))};E.getLayout=function(e){return(0,c.jsx)(_.Z,{children:e})};var k=E}},function(e){e.O(0,[662,652,415,475,632,700,774,888,179],(function(){return n=38557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);