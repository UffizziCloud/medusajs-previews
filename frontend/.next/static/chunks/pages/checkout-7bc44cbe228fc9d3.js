(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{57250:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return i(89792)}])},13580:function(e,s,i){"use strict";var r=i(26042),n=i(69396),t=i(99534),l=i(85893),a=i(61639),d=i(87786),o=i(67294),c=(0,o.forwardRef)((function(e,s){var i=e.placeholder,c=void 0===i?"Country":i,u=(0,t.Z)(e,["placeholder"]),p=(0,o.useRef)(null);(0,o.useImperativeHandle)(s,(function(){return p.current}));var x=(0,d.eHG)().regions,v=(0,d.jD1)().cart,h=(0,o.useMemo)((function(){var e=null===x||void 0===x?void 0:x.find((function(e){return e.id===(null===v||void 0===v?void 0:v.region_id)}));return e?e.countries.map((function(e){return{value:e.iso_2,label:e.display_name}})):[]}),[x,v]);return(0,l.jsx)(a.Z,(0,n.Z)((0,r.Z)({ref:p,placeholder:c},u),{children:h.map((function(e,s){var i=e.value,r=e.label;return(0,l.jsx)("option",{value:i,children:r},s)}))}))}));c.displayName="CountrySelect",s.Z=c},77391:function(e,s,i){"use strict";var r=i(26042),n=i(69396),t=i(99534),l=i(85893),a=i(18e3),d=i(86010);i(67294);s.Z=function(e){var s=e.children,i=e.className,o=e.isLoading,c=void 0!==o&&o,u=e.variant,p=void 0===u?"primary":u,x=(0,t.Z)(e,["children","className","isLoading","variant"]);return(0,l.jsx)("button",(0,n.Z)((0,r.Z)({},x),{className:(0,d.Z)("w-full uppercase flex items-center justify-center min-h-[50px] px-5 py-[10px] text-small-regular border transition-colors duration-200 disabled:opacity-50",{"text-white bg-gray-900 border-gray-900 hover:bg-white hover:text-gray-900 disabled:hover:bg-gray-900 disabled:hover:text-white":"primary"===p,"text-gray-900 bg-transparent border-gray-920 hover:bg-gray-100":"secondary"===p},i),children:c?(0,l.jsx)(a.Z,{}):s}))}},63269:function(e,s,i){"use strict";var r=i(85893),n=i(9008),t=i.n(n);i(67294);s.Z=function(e){var s=e.title,i=e.description,n=e.image;return(0,r.jsxs)(t(),{children:[(0,r.jsxs)("title",{children:[s," |\xa0ACME"]}),(0,r.jsx)("meta",{itemProp:"name",content:s}),i&&(0,r.jsx)("meta",{itemProp:"description",content:i}),n&&(0,r.jsx)("meta",{itemProp:"image",content:n}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})}},17001:function(e,s,i){"use strict";var r=i(26042),n=i(69396),t=i(99534),l=i(85893);i(67294);s.Z=function(e){var s=e.size,i=void 0===s?"16":s,a=e.color,d=void 0===a?"currentColor":a,o=(0,t.Z)(e,["size","color"]);return(0,l.jsx)("svg",(0,n.Z)((0,r.Z)({width:i,height:i,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:(0,l.jsx)("path",{d:"M4 6L8 10L12 6",stroke:d,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}},18e3:function(e,s,i){"use strict";var r=i(26042),n=i(69396),t=i(99534),l=i(85893);i(67294);s.Z=function(e){var s=e.size,i=void 0===s?"16":s,a=e.color,d=void 0===a?"currentColor":a,o=(0,t.Z)(e,["size","color"]);return(0,l.jsxs)("svg",(0,n.Z)((0,r.Z)({className:"animate-spin",width:i,height:i,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},o),{children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:d,strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:d,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}))}},86037:function(e,s,i){"use strict";var r=i(26042),n=i(69396),t=i(99534),l=i(85893);i(67294);s.Z=function(e){var s=e.size,i=void 0===s?"16":s,a=e.color,d=void 0===a?"currentColor":a,o=(0,t.Z)(e,["size","color"]);return(0,l.jsxs)("svg",(0,n.Z)((0,r.Z)({width:i,height:i,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,l.jsx)("path",{d:"M3.33301 5.49054H4.81449H16.6663",stroke:d,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M7.14286 5.5V4C7.14286 3.60218 7.29337 3.22064 7.56128 2.93934C7.82919 2.65804 8.19255 2.5 8.57143 2.5H11.4286C11.8075 2.5 12.1708 2.65804 12.4387 2.93934C12.7066 3.22064 12.8571 3.60218 12.8571 4V5.5M15 5.5V16C15 16.3978 14.8495 16.7794 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7794 5 16.3978 5 16V5.5H15Z",stroke:d,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M8.33203 9.23724V13.4039",stroke:d,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M11.666 9.23724V13.4039",stroke:d,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},71436:function(e,s,i){"use strict";var r=i(85893),n=function(){return(0,r.jsxs)("svg",{width:"158",height:"24",viewBox:"0 0 158 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_106_685)",children:[(0,r.jsx)("path",{d:"M1.656 15.09V18.716H0.62V9.14H1.628V10.078C2.25333 9.34067 3.03267 8.972 3.966 8.972C4.89933 8.972 5.66467 9.322 6.262 10.022C6.85933 10.7033 7.158 11.5527 7.158 12.57C7.158 13.5873 6.85933 14.4367 6.262 15.118C5.65533 15.8087 4.89 16.154 3.966 16.154C3.02333 16.154 2.25333 15.7993 1.656 15.09ZM5.492 14.446C5.89333 13.9607 6.094 13.3353 6.094 12.57C6.094 11.8047 5.89333 11.1793 5.492 10.694C5.08133 10.1993 4.54 9.952 3.868 9.952C3.18667 9.952 2.64067 10.1993 2.23 10.694C1.82867 11.1793 1.628 11.8047 1.628 12.57C1.628 13.3353 1.82867 13.9607 2.23 14.446C2.64067 14.9407 3.18667 15.188 3.868 15.188C4.54 15.188 5.08133 14.9407 5.492 14.446ZM12.2733 16.154C11.2933 16.154 10.4719 15.8087 9.80925 15.118C9.15592 14.4273 8.82925 13.578 8.82925 12.57C8.82925 11.562 9.15592 10.7127 9.80925 10.022C10.4719 9.322 11.2933 8.972 12.2733 8.972C13.2533 8.972 14.0746 9.322 14.7373 10.022C15.4093 10.722 15.7452 11.5713 15.7452 12.57C15.7452 13.5593 15.4139 14.4087 14.7513 15.118C14.0886 15.8087 13.2626 16.154 12.2733 16.154ZM12.2733 15.188C12.9733 15.188 13.5473 14.9407 13.9953 14.446C14.4433 13.942 14.6673 13.3167 14.6673 12.57C14.6673 11.814 14.4433 11.1933 13.9953 10.708C13.5473 10.204 12.9733 9.952 12.2733 9.952C11.5826 9.952 11.0133 10.204 10.5653 10.708C10.1173 11.1933 9.89325 11.814 9.89325 12.57C9.89325 13.3167 10.1173 13.942 10.5653 14.446C11.0133 14.9407 11.5826 15.188 12.2733 15.188ZM17.8424 9.14L19.4244 14.866L21.0064 9.14H22.4064L23.9884 14.866L25.5704 9.14H26.7044L24.6604 16H23.3724L21.7064 10.33L20.0544 16H18.7524L16.7084 9.14H17.8424ZM33.8708 12.416L33.8568 12.892H28.7468C28.7934 13.6107 29.0221 14.1753 29.4328 14.586C29.8434 14.9873 30.3848 15.188 31.0568 15.188C31.8221 15.188 32.4754 14.852 33.0168 14.18L33.7308 14.838C33.0028 15.7153 32.1114 16.154 31.0568 16.154C30.0301 16.154 29.2088 15.8273 28.5928 15.174C27.9861 14.5113 27.6828 13.6573 27.6828 12.612C27.6828 11.5667 27.9628 10.7033 28.5228 10.022C29.0921 9.322 29.8528 8.972 30.8048 8.972C31.5048 8.972 32.0928 9.154 32.5688 9.518C33.4368 10.1713 33.8708 11.1373 33.8708 12.416ZM30.8328 9.952C30.2634 9.952 29.8014 10.134 29.4468 10.498C29.1014 10.862 28.8821 11.352 28.7888 11.968H32.8208C32.7741 11.352 32.5688 10.862 32.2048 10.498C31.8501 10.134 31.3928 9.952 30.8328 9.952ZM39.3401 9.056V10.05C39.2934 10.0407 39.2141 10.036 39.1021 10.036C38.2807 10.036 37.6927 10.2693 37.3381 10.736C36.9927 11.1933 36.8201 11.9727 36.8201 13.074V16H35.7841V9.14H36.7921V10.05C37.0907 9.686 37.4081 9.42933 37.7441 9.28C38.0894 9.12133 38.5187 9.042 39.0321 9.042C39.1721 9.042 39.2747 9.04667 39.3401 9.056ZM46.5856 12.416L46.5716 12.892H41.4616C41.5083 13.6107 41.7369 14.1753 42.1476 14.586C42.5583 14.9873 43.0996 15.188 43.7716 15.188C44.5369 15.188 45.1903 14.852 45.7316 14.18L46.4456 14.838C45.7176 15.7153 44.8263 16.154 43.7716 16.154C42.7449 16.154 41.9236 15.8273 41.3076 15.174C40.7009 14.5113 40.3976 13.6573 40.3976 12.612C40.3976 11.5667 40.6776 10.7033 41.2376 10.022C41.8069 9.322 42.5676 8.972 43.5196 8.972C44.2196 8.972 44.8076 9.154 45.2836 9.518C46.1516 10.1713 46.5856 11.1373 46.5856 12.416ZM43.5476 9.952C42.9783 9.952 42.5163 10.134 42.1616 10.498C41.8163 10.862 41.5969 11.352 41.5036 11.968H45.5356C45.4889 11.352 45.2836 10.862 44.9196 10.498C44.5649 10.134 44.1076 9.952 43.5476 9.952ZM49.1549 10.022C49.7616 9.322 50.5269 8.972 51.4509 8.972C52.3749 8.972 53.1449 9.33133 53.7609 10.05V6.186H54.7969V16H53.8029V15.062C53.1776 15.79 52.3936 16.154 51.4509 16.154C50.5269 16.154 49.7616 15.8087 49.1549 15.118C48.5576 14.4367 48.2589 13.5873 48.2589 12.57C48.2589 11.5527 48.5576 10.7033 49.1549 10.022ZM49.9249 10.694C49.5236 11.1793 49.3229 11.8047 49.3229 12.57C49.3229 13.3353 49.5236 13.9607 49.9249 14.446C50.3356 14.9407 50.8769 15.188 51.5489 15.188C52.2303 15.188 52.7763 14.9407 53.1869 14.446C53.5976 13.9513 53.8029 13.326 53.8029 12.57C53.8029 11.814 53.5976 11.1887 53.1869 10.694C52.7763 10.1993 52.2303 9.952 51.5489 9.952C50.8769 9.952 50.3356 10.1993 49.9249 10.694ZM62.3448 15.062V16H61.3368V6.186H62.3728V10.05C62.9888 9.33133 63.7588 8.972 64.6828 8.972C65.6161 8.972 66.3815 9.322 66.9788 10.022C67.5761 10.7033 67.8748 11.5527 67.8748 12.57C67.8748 13.5873 67.5761 14.4367 66.9788 15.118C66.3721 15.8087 65.6068 16.154 64.6828 16.154C63.7588 16.154 62.9795 15.79 62.3448 15.062ZM66.2088 14.446C66.6101 13.9607 66.8108 13.3353 66.8108 12.57C66.8108 11.8047 66.6101 11.1793 66.2088 10.694C65.7981 10.1993 65.2568 9.952 64.5848 9.952C63.9035 9.952 63.3575 10.1993 62.9468 10.694C62.5455 11.1793 62.3448 11.8047 62.3448 12.57C62.3448 13.3353 62.5455 13.9607 62.9468 14.446C63.3575 14.9407 63.9035 15.188 64.5848 15.188C65.2568 15.188 65.7981 14.9407 66.2088 14.446ZM75.6016 9.14L71.7656 18.716H70.6316L71.6676 16.084L68.8256 9.14H69.9876L72.2416 14.838L74.4536 9.14H75.6016Z",fill:"#9CA3AF"}),(0,r.jsx)("path",{d:"M97.5967 6.59719L93.9438 4.51277C92.7486 3.82908 91.284 3.82908 90.0888 4.51277L86.4191 6.59719C85.2407 7.28088 84.5 8.5482 84.5 9.89891V14.0844C84.5 15.4518 85.2407 16.7024 86.4191 17.3861L90.072 19.4872C91.2672 20.1709 92.7317 20.1709 93.9269 19.4872L97.5798 17.3861C98.775 16.7024 99.4989 15.4518 99.4989 14.0844V9.89891C99.5326 8.5482 98.7919 7.28088 97.5967 6.59719ZM92.0079 15.7186C89.9373 15.7186 88.2539 14.0511 88.2539 12C88.2539 9.94893 89.9373 8.2814 92.0079 8.2814C94.0784 8.2814 95.7786 9.94893 95.7786 12C95.7786 14.0511 94.0953 15.7186 92.0079 15.7186Z",fill:"#9CA3AF"}),(0,r.jsx)("path",{d:"M114.332 16H112.75V11.898C112.75 11.4407 112.638 11.0813 112.414 10.82C112.19 10.5493 111.882 10.414 111.49 10.414C111.042 10.414 110.692 10.5633 110.44 10.862C110.197 11.1607 110.076 11.5713 110.076 12.094V16H108.48V9.14H110.048V9.742C110.477 9.22867 111.07 8.972 111.826 8.972C112.675 8.972 113.315 9.27067 113.744 9.868C114.276 9.27067 114.99 8.972 115.886 8.972C116.782 8.972 117.459 9.23333 117.916 9.756C118.383 10.2693 118.616 11.0207 118.616 12.01V16H117.02V11.898C117.02 11.4407 116.908 11.0813 116.684 10.82C116.46 10.5493 116.152 10.414 115.76 10.414C115.312 10.414 114.962 10.568 114.71 10.876C114.458 11.1747 114.332 11.5807 114.332 12.094V16ZM126.38 12.486L126.366 13.046H121.676C121.714 13.5593 121.896 13.9653 122.222 14.264C122.549 14.5627 122.969 14.712 123.482 14.712C124.22 14.712 124.808 14.39 125.246 13.746L126.324 14.754C125.596 15.6873 124.649 16.154 123.482 16.154C122.446 16.154 121.616 15.8273 120.99 15.174C120.356 14.5113 120.038 13.6573 120.038 12.612C120.038 11.5947 120.328 10.7313 120.906 10.022C121.494 9.322 122.274 8.972 123.244 8.972C124.28 8.972 125.06 9.31733 125.582 10.008C126.114 10.6987 126.38 11.5247 126.38 12.486ZM123.258 10.428C122.857 10.428 122.526 10.554 122.264 10.806C122.012 11.058 121.844 11.38 121.76 11.772H124.686C124.677 11.3893 124.551 11.072 124.308 10.82C124.066 10.5587 123.716 10.428 123.258 10.428ZM131.081 8.972C131.847 8.972 132.486 9.196 132.999 9.644V6.186H134.595V16H133.027V15.384C132.542 15.8973 131.893 16.154 131.081 16.154C130.111 16.154 129.308 15.818 128.673 15.146C128.048 14.4647 127.735 13.606 127.735 12.57C127.735 11.534 128.048 10.6753 128.673 9.994C129.299 9.31267 130.101 8.972 131.081 8.972ZM132.537 11.002C132.211 10.5913 131.763 10.386 131.193 10.386C130.624 10.386 130.176 10.5913 129.849 11.002C129.523 11.4127 129.359 11.9353 129.359 12.57C129.359 13.2047 129.523 13.7273 129.849 14.138C130.176 14.5487 130.624 14.754 131.193 14.754C131.763 14.754 132.211 14.5487 132.537 14.138C132.864 13.7273 133.027 13.2047 133.027 12.57C133.027 11.9353 132.864 11.4127 132.537 11.002ZM136.353 9.14H137.949V13.242C137.949 13.6993 138.061 14.0633 138.285 14.334C138.509 14.5953 138.826 14.726 139.237 14.726C139.675 14.726 140.021 14.572 140.273 14.264C140.534 13.9467 140.665 13.5267 140.665 13.004V9.14H142.261V16H140.693V15.44C140.254 15.916 139.661 16.154 138.915 16.154C138.131 16.154 137.505 15.888 137.039 15.356C136.581 14.8147 136.353 14.0727 136.353 13.13V9.14ZM146.99 13.41L146.08 13.186C144.69 12.8593 143.994 12.136 143.994 11.016C143.994 10.4 144.228 9.90533 144.694 9.532C145.161 9.15867 145.763 8.972 146.5 8.972C147.49 8.972 148.353 9.35467 149.09 10.12L148.068 11.212C147.648 10.6333 147.112 10.344 146.458 10.344C146.178 10.344 145.95 10.4093 145.772 10.54C145.604 10.6613 145.52 10.8107 145.52 10.988C145.52 11.3053 145.744 11.52 146.192 11.632L147.27 11.884C148.67 12.2013 149.37 12.9153 149.37 14.026C149.37 14.6607 149.128 15.174 148.642 15.566C148.166 15.958 147.504 16.154 146.654 16.154C145.46 16.154 144.512 15.7107 143.812 14.824L144.82 13.788C145.324 14.4507 145.978 14.782 146.78 14.782C147.48 14.782 147.83 14.5487 147.83 14.082C147.83 13.7833 147.55 13.5593 146.99 13.41ZM152.809 16.154C152.147 16.154 151.596 15.9673 151.157 15.594C150.719 15.2113 150.499 14.7027 150.499 14.068C150.499 13.34 150.761 12.7753 151.283 12.374C151.806 11.9727 152.497 11.772 153.355 11.772C153.785 11.772 154.247 11.8513 154.741 12.01V11.548C154.741 11.212 154.615 10.9413 154.363 10.736C154.111 10.5213 153.789 10.414 153.397 10.414C152.679 10.414 152.137 10.7453 151.773 11.408L150.695 10.4C150.947 9.94267 151.316 9.59267 151.801 9.35C152.296 9.098 152.833 8.972 153.411 8.972C154.317 8.972 155.031 9.196 155.553 9.644C156.076 10.092 156.337 10.7313 156.337 11.562V16H154.769V15.468C154.256 15.9253 153.603 16.154 152.809 16.154ZM152.095 13.956C152.095 14.1893 152.184 14.3807 152.361 14.53C152.548 14.6793 152.805 14.754 153.131 14.754C153.803 14.754 154.34 14.558 154.741 14.166V13.382C154.237 13.1953 153.761 13.102 153.313 13.102C152.94 13.102 152.641 13.1767 152.417 13.326C152.203 13.4753 152.095 13.6853 152.095 13.956Z",fill:"#9CA3AF"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_106_685",children:(0,r.jsx)("rect",{width:"157",height:"24",fill:"white",transform:"translate(0.5)"})})})]})};s.Z=function(){return(0,r.jsx)("div",{className:"py-4 flex justify-center items-center w-full",children:(0,r.jsx)("div",{className:"content-container flex justify-center flex-1",children:(0,r.jsx)("a",{href:"https://www.medusajs.com",target:"_blank",rel:"noreferrer",children:(0,r.jsx)(n,{})})})})}},89792:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return Ce}});var r=i(85893),n=i(47568),t=i(26042),l=i(69396),a=i(70655),d=i(55738),o=i(83721),c=i(86664),u=i(54465),p=i(67294),x=(0,u.J)(""),v=function(e){var s=e.paymentSession,i=e.children,n={clientSecret:s.data.client_secret};return(0,r.jsx)(c.Elements,{stripe:x,options:n,children:i})},h=function(e){var s=e.paymentSession,i=e.children;return s&&"stripe"===s.provider_id?(0,r.jsx)(v,{paymentSession:s,children:i}):(0,r.jsx)("div",{children:i})},m=i(96486),f=i(87786),g=i(11163),j=i(87536),C=i(40909),_=(0,p.createContext)(null),y=function(e){var s=e.children,i=(0,f.jD1)(),c=i.cart,u=i.setCart,x=i.addShippingMethod,v=x.mutate,y=x.isLoading,b=i.completeCheckout,N=b.mutate,w=b.isLoading,k=(0,f._Bd)().customer,S=(0,C.o)().countryCode,L=(0,j.cI)({defaultValues:Z(k,c,S),reValidateMode:"onChange"}),M=(0,f.Y_P)(null===c||void 0===c?void 0:c.id),V=M.mutate,E=M.isLoading,H=(0,f.rA)(null===c||void 0===c?void 0:c.id),P=H.mutate,A=H.isLoading,q=(0,f.xlM)(null===c||void 0===c?void 0:c.id,{enabled:!!(null===c||void 0===c?void 0:c.id)}).shipping_options,z=((0,f.eHG)().regions,(0,C.o)()),F=z.resetCart,B=(z.setRegion,(0,g.useRouter)().push),R=(0,o.Z)(),D=(0,o.Z)(!(null===c||void 0===c?void 0:c.billing_address)||!(null===c||void 0===c?void 0:c.shipping_address)||(0,m.isEqual)(c.billing_address,c.shipping_address)),T=(0,p.useMemo)((function(){return y||E||A||w}),[y,w,E,A]),I=(0,p.useMemo)((function(){var e;return!!c&&!!c.email&&!!c.shipping_address&&!!c.billing_address&&!!c.payment_session&&(null===(e=c.shipping_methods)||void 0===e?void 0:e.length)>0}),[c]),O=(0,p.useMemo)((function(){return q&&(null===c||void 0===c?void 0:c.region)?null===q||void 0===q?void 0:q.map((function(e){return{value:e.id,label:e.name,price:(0,f.dNj)({amount:e.amount||0,region:c.region})}})):[]}),[q,c]);(0,p.useEffect)((function(){(null===c||void 0===c?void 0:c.id)&&L.reset(Z(k,c,S))}),[k,c,L,S]),(0,p.useEffect)((function(){c&&(null===c||void 0===c?void 0:c.shipping_address)&&(null===c||void 0===c?void 0:c.billing_address)?R.close():R.open()}),[c]);var W=function(e){c&&v({option_id:e},{onSuccess:function(e){var s=e.cart;return u(s)}})},G=function(){var e=(0,n.Z)((function(e){return(0,a.__generator)(this,(function(s){return[2,d.pZ.carts.createPaymentSessions(e,{"Idempotency-Key":"create_payment_session_key"}).then((function(e){return e.cart})).catch((function(){return null}))]}))}));return function(s){return e.apply(this,arguments)}}(),U=function(){var e=(0,n.Z)((function(){var e,s,i;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return(null===c||void 0===c?void 0:c.id)&&!(null===(e=c.payment_sessions)||void 0===e?void 0:e.length)&&(null===c||void 0===c||null===(s=c.items)||void 0===s?void 0:s.length)?[4,G(c.id)]:[3,2];case 1:if(i=r.sent())return u(i),[2];setTimeout(U,500),r.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)(j.RV,(0,l.Z)((0,t.Z)({},L),{children:(0,r.jsx)(_.Provider,{value:{cart:c,shippingMethods:O,isLoading:T,readyToComplete:I,sameAsBilling:D,editAddresses:R,initPayment:U,setAddresses:function(e){var s=e.shipping_address,i=e.billing_address,r={shipping_address:s,email:e.email};(0,m.isEqual)(s,i)&&D.open(),D.state?r.billing_address=s:r.billing_address=i,P(r,{onSuccess:function(e){var s=e.cart;u(s),U(),O&&W(O[0].value)}})},setSavedAddress:function(e){(0,L.setValue)("shipping_address",{address_1:e.address_1||"",address_2:e.address_2||"",city:e.city||"",country_code:e.country_code||"",first_name:e.first_name||"",last_name:e.last_name||"",phone:e.phone||"",postal_code:e.postal_code||"",province:e.province||"",company:e.company||""})},setShippingOption:W,setPaymentSession:function(e){c&&V({provider_id:e},{onSuccess:function(e){var s=e.cart;u(s)}})},onPaymentCompleted:function(){N(void 0,{onSuccess:function(e){var s=e.data;F(),B("/order/confirmed/".concat(s.id))}})}},children:(0,r.jsx)(h,{paymentSession:null===c||void 0===c?void 0:c.payment_session,children:s})})}))},b=function(){var e=(0,p.useContext)(_),s=(0,j.Gc)();if(null===e)throw new Error("useProductActionContext must be used within a ProductActionProvider");return(0,t.Z)({},e,s)},Z=function(e,s,i){var r,n,t,l,a,d,o,c,u,p,x,v,h,m,f,g,j,C,_,y,b,Z=null===e||void 0===e||null===(r=e.shipping_addresses)||void 0===r?void 0:r[0],N=null===e||void 0===e?void 0:e.billing_address;return{shipping_address:{first_name:(null===s||void 0===s||null===(n=s.shipping_address)||void 0===n?void 0:n.first_name)||(null===Z||void 0===Z?void 0:Z.first_name)||"",last_name:(null===s||void 0===s||null===(t=s.shipping_address)||void 0===t?void 0:t.last_name)||(null===Z||void 0===Z?void 0:Z.last_name)||"",address_1:(null===s||void 0===s||null===(l=s.shipping_address)||void 0===l?void 0:l.address_1)||(null===Z||void 0===Z?void 0:Z.address_1)||"",address_2:(null===s||void 0===s||null===(a=s.shipping_address)||void 0===a?void 0:a.address_2)||(null===Z||void 0===Z?void 0:Z.address_2)||"",city:(null===s||void 0===s||null===(d=s.shipping_address)||void 0===d?void 0:d.city)||(null===Z||void 0===Z?void 0:Z.city)||"",country_code:i||(null===s||void 0===s||null===(o=s.shipping_address)||void 0===o?void 0:o.country_code)||(null===Z||void 0===Z?void 0:Z.country_code)||"",province:(null===s||void 0===s||null===(c=s.shipping_address)||void 0===c?void 0:c.province)||(null===Z||void 0===Z?void 0:Z.province)||"",company:(null===s||void 0===s||null===(u=s.shipping_address)||void 0===u?void 0:u.company)||(null===Z||void 0===Z?void 0:Z.company)||"",postal_code:(null===s||void 0===s||null===(p=s.shipping_address)||void 0===p?void 0:p.postal_code)||(null===Z||void 0===Z?void 0:Z.postal_code)||"",phone:(null===s||void 0===s||null===(x=s.shipping_address)||void 0===x?void 0:x.phone)||(null===Z||void 0===Z?void 0:Z.phone)||""},billing_address:{first_name:(null===s||void 0===s||null===(v=s.billing_address)||void 0===v?void 0:v.first_name)||(null===N||void 0===N?void 0:N.first_name)||"",last_name:(null===s||void 0===s||null===(h=s.billing_address)||void 0===h?void 0:h.last_name)||(null===N||void 0===N?void 0:N.last_name)||"",address_1:(null===s||void 0===s||null===(m=s.billing_address)||void 0===m?void 0:m.address_1)||(null===N||void 0===N?void 0:N.address_1)||"",address_2:(null===s||void 0===s||null===(f=s.billing_address)||void 0===f?void 0:f.address_2)||(null===N||void 0===N?void 0:N.address_2)||"",city:(null===s||void 0===s||null===(g=s.billing_address)||void 0===g?void 0:g.city)||(null===N||void 0===N?void 0:N.city)||"",country_code:(null===s||void 0===s||null===(j=s.shipping_address)||void 0===j?void 0:j.country_code)||(null===N||void 0===N?void 0:N.country_code)||"",province:(null===s||void 0===s||null===(C=s.shipping_address)||void 0===C?void 0:C.province)||(null===N||void 0===N?void 0:N.province)||"",company:(null===s||void 0===s||null===(_=s.billing_address)||void 0===_?void 0:_.company)||(null===N||void 0===N?void 0:N.company)||"",postal_code:(null===s||void 0===s||null===(y=s.billing_address)||void 0===y?void 0:y.postal_code)||(null===N||void 0===N?void 0:N.postal_code)||"",phone:(null===s||void 0===s||null===(b=s.billing_address)||void 0===b?void 0:b.phone)||(null===N||void 0===N?void 0:N.phone)||""},email:(null===s||void 0===s?void 0:s.email)||(null===e||void 0===e?void 0:e.email)||""}},N=i(17001),w=i(71436),k=i(41664),S=i.n(k),L=i(84539),M=i(98831),V=function(){},E=i(18e3),H=function(){var e=b().isLoading;return(0,r.jsx)(L.u,{show:e,children:(0,r.jsx)(M.V,{onClose:V,className:"relative z-[100]",children:(0,r.jsx)(L.u.Child,{enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-50 flex items-center justify-center",children:(0,r.jsx)(E.Z,{size:24})})})})})},P=i(77391),A=function(e){var s=e.checked,i=void 0!==s&&s,n=e.onChange,t=e.label;return(0,r.jsxs)("button",{className:"text-base-regular flex items-center gap-x-2",role:"checkbox",type:"button","aria-checked":i,onClick:n,children:[(0,r.jsx)("div",{role:"checkbox","aria-checked":i,className:"border border-gray-900 w-5 h-5 flex items-center justify-center",children:i?"\u2713":null}),(0,r.jsx)("span",{children:t})]})},q=function(e){var s=e.children,i=(0,j.Gc)();return s((0,t.Z)({},i))},z=i(1166),F=i(13580),B=function(){return(0,r.jsx)(q,{children:function(e){var s=e.register,i=e.formState,n=i.errors,a=i.touchedFields;return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"First name"},s("billing_address.first_name",{required:"First name is required"})),{autoComplete:"given-name",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Last name"},s("billing_address.last_name",{required:"Last name is required"})),{autoComplete:"family-name",errors:n,touched:a}))]}),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Company"},s("billing_address.company")),{autoComplete:"organization",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Address"},s("billing_address.address_1",{required:"Address is required"})),{autoComplete:"address-line1",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Apartments, suite, etc."},s("billing_address.address_2")),{autoComplete:"address-line2",errors:n,touched:a})),(0,r.jsxs)("div",{className:"grid grid-cols-[144px_1fr] gap-x-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Postal code"},s("billing_address.postal_code",{required:"Postal code is required"})),{autoComplete:"postal-code",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"City"},s("billing_address.city",{required:"City is required"})),{autoComplete:"address-level2",errors:n,touched:a}))]}),(0,r.jsx)(F.Z,(0,l.Z)((0,t.Z)({},s("billing_address.country_code",{required:"Country is required"})),{autoComplete:"country",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"State / Province"},s("billing_address.province")),{autoComplete:"address-level1",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Phone"},s("billing_address.phone")),{autoComplete:"tel",errors:n,touched:a}))]})}})},R=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/g,D=i(38705),T=i(86010),I=function(e){var s=e.checked;return(0,r.jsx)("div",{className:(0,T.Z)("h-3 w-3 rounded-full border border-gray-200 flex items-center justify-center",{"border-gray-900":s}),children:s&&(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-900"})})},O=function(e){var s=e.addresses,i=(0,p.useState)(void 0),n=i[0],t=i[1],l=b(),a=l.control,d=l.setSavedAddress,o=(0,j.qo)({control:a,name:"shipping_address"}),c=(0,p.useMemo)((function(){var e=!0,i=!1,r=void 0;try{for(var n,t=s[Symbol.iterator]();!(e=(n=t.next()).done);e=!0){var l=n.value;if((0,m.isEqual)((0,m.omit)(l,["id","created_at","updated_at","country","deleted_at","metadata","customer_id"]),o))return l}}catch(a){i=!0,r=a}finally{try{e||null==t.return||t.return()}finally{if(i)throw r}}}),[o,s]);return(0,r.jsx)(D.R,{onChange:function(e){var i=s.find((function(s){return s.id===e}));i&&d(i),t(e)},value:n,children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(D.R.Button,{className:"relative w-full flex justify-between items-center px-4 py-[10px] text-left bg-white cursor-default focus:outline-none border border-gray-200 focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-gray-300 focus-visible:ring-offset-2 focus-visible:border-gray-300 text-base-regular",children:function(e){var s=e.open;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"block truncate",children:c?c.address_1:"Choose an address"}),(0,r.jsx)(N.Z,{size:16,className:(0,T.Z)({"transform rotate-180":s})})]})}}),(0,r.jsx)(L.u,{as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(D.R.Options,{className:"absolute z-20 w-full overflow-auto text-small-regular bg-white border border-gray-200 border-top-0 max-h-60 focus:outline-none sm:text-sm",children:s.map((function(e){var s;return(0,r.jsx)(D.R.Option,{value:e.id,className:"cursor-default select-none relative pl-6 pr-10 hover:bg-gray-50 py-4",children:(0,r.jsxs)("div",{className:"flex gap-x-4 items-start",children:[(0,r.jsx)(I,{checked:n===e.id}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"text-left text-base-semi",children:[e.first_name," ",e.last_name]}),e.company&&(0,r.jsx)("span",{className:"text-small-regular text-gray-700",children:e.company}),(0,r.jsxs)("div",{className:"flex flex-col text-left text-base-regular mt-2",children:[(0,r.jsxs)("span",{children:[e.address_1,e.address_2&&(0,r.jsxs)("span",{children:[", ",e.address_2]})]}),(0,r.jsxs)("span",{children:[e.postal_code,", ",e.city]}),(0,r.jsxs)("span",{children:[e.province&&"".concat(e.province,", "),null===(s=e.country_code)||void 0===s?void 0:s.toUpperCase()]})]})]})]})},e.id)}))})})]})})},W=function(){var e,s=(0,f._Bd)().customer;return(0,r.jsxs)("div",{children:[s&&((null===(e=s.shipping_addresses)||void 0===e?void 0:e.length)||0)>0&&(0,r.jsxs)("div",{className:"mb-6 flex flex-col gap-y-4 bg-amber-100 p-4",children:[(0,r.jsx)("p",{className:"text-small-regular",children:"Hi ".concat(s.first_name,", do you want to use one of your saved addresses?")}),(0,r.jsx)(O,{addresses:s.shipping_addresses})]}),(0,r.jsx)(q,{children:function(e){var s=e.register,i=e.formState,n=i.errors,a=i.touchedFields;return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-y-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Email"},s("email",{required:"Email is required",pattern:R})),{autoComplete:"email",errors:n,touched:a})),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"First name"},s("shipping_address.first_name",{required:"First name is required"})),{autoComplete:"given-name",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Last name"},s("shipping_address.last_name",{required:"Last name is required"})),{autoComplete:"family-name",errors:n,touched:a}))]}),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Company"},s("shipping_address.company")),{autoComplete:"organization",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Address"},s("shipping_address.address_1",{required:"Address is required"})),{autoComplete:"address-line1",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Apartments, suite, etc."},s("shipping_address.address_2")),{autoComplete:"address-line2",errors:n,touched:a})),(0,r.jsxs)("div",{className:"grid grid-cols-[122px_1fr] gap-x-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Postal code"},s("shipping_address.postal_code",{required:"Postal code is required"})),{autoComplete:"postal-code",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"City"},s("shipping_address.city",{required:"City is required"})),{autoComplete:"address-level2",errors:n,touched:a}))]}),(0,r.jsx)(F.Z,(0,l.Z)((0,t.Z)({},s("shipping_address.country_code",{required:"Country is required"})),{autoComplete:"country",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"State / Province"},s("shipping_address.province")),{autoComplete:"address-level1",errors:n,touched:a})),(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Phone"},s("shipping_address.phone")),{autoComplete:"tel",errors:n,touched:a}))]})}})]})},G=function(){var e,s,i=b(),n=i.sameAsBilling,t=n.state,l=n.toggle,a=i.editAddresses,d=a.state,o=a.toggle,c=i.setAddresses,u=i.handleSubmit,p=i.cart;return(0,r.jsxs)("div",{className:"bg-white",children:[(0,r.jsxs)("div",{className:"text-xl-semi flex items-center gap-x-4 px-8 pb-6 pt-8",children:[(0,r.jsx)("div",{className:"bg-gray-900 w-8 h-8 rounded-full text-white flex justify-center items-center text-sm",children:"1"}),(0,r.jsx)("h2",{children:"Shipping address"})]}),d?(0,r.jsxs)("div",{className:"px-8 pb-8",children:[(0,r.jsx)(W,{}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(A,{label:"Same as billing address",checked:t,onChange:l})}),!t&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl-semi flex items-center gap-x-4 pb-6 pt-8",children:[(0,r.jsx)("div",{className:"bg-gray-900 w-8 h-8 rounded-full text-white flex justify-center items-center font-mono text-sm",children:"2"}),(0,r.jsx)("h2",{children:"Billing address"})]}),(0,r.jsx)(B,{})]}),(0,r.jsx)(P.Z,{className:"max-w-[200px] mt-6",onClick:u(c),children:"Continue to delivery"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"bg-gray-50 px-8 py-6 text-small-regular",children:p&&p.shipping_address?(0,r.jsxs)("div",{className:"flex items-start gap-x-8",children:[(0,r.jsx)("div",{className:"bg-green-400 rounded-full min-w-[24px] h-6 flex items-center justify-center text-white text-small-regular",children:"\u2713"}),(0,r.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{children:[p.shipping_address.first_name," ",p.shipping_address.last_name]}),(0,r.jsxs)("span",{children:[p.shipping_address.address_1," ",p.shipping_address.address_2]}),(0,r.jsxs)("span",{children:[p.shipping_address.postal_code,","," ",p.shipping_address.city]}),(0,r.jsx)("span",{children:null===(e=p.shipping_address.country_code)||void 0===e?void 0:e.toUpperCase()}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,r.jsx)("span",{children:p.shipping_address.phone}),(0,r.jsx)("span",{children:p.email})]}),t&&(0,r.jsxs)("div",{className:"flex items-center gap-x-2 mt-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center border border-gray-700 bg-gray-100 w-4 h-4",children:"\u2713"}),(0,r.jsx)("span",{children:"Same as billing address"})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:o,children:"Edit"})})]})]}):(0,r.jsx)("div",{className:"",children:(0,r.jsx)(E.Z,{})})}),!t&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-xl-semi flex items-center gap-x-4 px-8 pb-6 pt-8",children:[(0,r.jsx)("div",{className:"bg-gray-900 w-8 h-8 rounded-full text-white flex justify-center items-center font-mono text-sm",children:"2"}),(0,r.jsx)("h2",{children:"Billing address"})]}),(0,r.jsx)("div",{className:"bg-gray-50 px-8 py-6 text-small-regular",children:p&&p.billing_address?(0,r.jsxs)("div",{className:"flex items-start gap-x-8",children:[(0,r.jsx)("div",{className:"bg-green-400 rounded-full min-w-[24px] h-6 flex items-center justify-center text-white text-small-regular",children:"\u2713"}),(0,r.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{children:[p.billing_address.first_name," ",p.billing_address.last_name]}),(0,r.jsxs)("span",{children:[p.billing_address.address_1," ",p.billing_address.address_2]}),(0,r.jsxs)("span",{children:[p.billing_address.postal_code,","," ",p.billing_address.city]}),(0,r.jsx)("span",{children:null===(s=p.billing_address.country_code)||void 0===s?void 0:s.toUpperCase()}),(0,r.jsx)("div",{className:"mt-4 flex flex-col",children:(0,r.jsx)("span",{children:p.billing_address.phone})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:o,children:"Edit"})})]})]}):(0,r.jsx)("div",{className:"",children:(0,r.jsx)(E.Z,{})})})]})]})]})},U=function(e){var s=e.options;return(0,r.jsxs)("div",{className:"border-b border-gray-200 py-2 relative",children:[(0,r.jsx)("span",{className:"absolute -top-6 text-gray-700 text-base-regular",children:"Card number"}),(0,r.jsx)(c.CardNumberElement,{options:s})]})},X=function(e){var s=e.options;return(0,r.jsxs)("div",{className:"border-b border-gray-200 w-full py-2 relative",children:[(0,r.jsx)("span",{className:"absolute -top-6 text-gray-700 text-base-regular",children:"Expiration date"}),(0,r.jsx)(c.CardExpiryElement,{options:s})]})},$=function(e){var s=e.options;return(0,r.jsxs)("div",{className:"border-b border-gray-200 w-full py-2 relative",children:[(0,r.jsx)("span",{className:"absolute -top-6 text-gray-700 text-base-regular",children:"CVC"}),(0,r.jsx)(c.CardCvcElement,{options:(0,l.Z)((0,t.Z)({},s),{placeholder:"123"})})]})},J=function(){var e=(0,p.useMemo)((function(){return{style:{base:{fontFamily:"Inter, sans-serif",color:"#424270",padding:"10px 12px","::placeholder":{color:"#CFD7E0"}}}}}),[]);return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-col relative w-full pb-6",children:[(0,r.jsx)(U,{options:e}),(0,r.jsxs)("div",{className:"flex items-center mt-12 relative gap-x-4",children:[(0,r.jsx)(X,{options:e}),(0,r.jsx)($,{options:e})]})]})})},K={stripe:{title:"Credit card",description:"Secure payment with credit card"},"stripe-ideal":{title:"iDEAL",description:"Secure payment with iDEAL"},paypal:{title:"PayPal",description:"Secure payment with PayPal"},manual:{title:"Test payment",description:"Test payment using medusa-payment-manual"}},Q=function(e){return"stripe"===e.paymentSession.provider_id?(0,r.jsx)("div",{className:"pt-8 pr-7",children:(0,r.jsx)(J,{})}):null},Y=function(e){var s=e.paymentSession,i=e.selected,n=e.setSelected,t=e.disabled,l=void 0!==t&&t;return(0,r.jsx)("div",{className:(0,T.Z)("flex flex-col gap-y-4 border-b border-gray-200 last:border-b-0",{"bg-gray-50":i}),children:(0,r.jsxs)("button",{className:"grid grid-cols-[12px_1fr] gap-x-4 py-4 px-8",onClick:n,disabled:l,children:[(0,r.jsx)(I,{checked:i}),(0,r.jsxs)("div",{className:"flex flex-col text-left",children:[(0,r.jsx)("h3",{className:"text-base-semi leading-none text-gray-900",children:K[s.provider_id].title}),(0,r.jsx)("span",{className:"text-gray-700 text-small-regular mt-2",children:K[s.provider_id].description}),i&&(0,r.jsx)("div",{className:"w-full mt-4",children:(0,r.jsx)(Q,{paymentSession:s})})]})]})})},ee=i(99534),se=i(6512),ie=function(e){var s=e.index,i=e.title,n=e.className,a=e.closedState,d=e.children,o=(0,ee.Z)(e,["index","title","className","closedState","children"]),c=b().editAddresses.state;return(0,r.jsx)("div",{children:(0,r.jsxs)("div",(0,l.Z)((0,t.Z)({className:(0,T.Z)("bg-white",n,{"opacity-50 pointer-events-none select-none":c})},o),{children:[(0,r.jsxs)("div",{className:"text-xl-semi flex items-center gap-x-4 px-8 pb-6 pt-8",children:[(0,r.jsx)("div",{className:"bg-gray-900 w-8 h-8 rounded-full text-white flex justify-center items-center text-sm",children:s}),(0,r.jsx)("h2",{children:i})]}),(0,r.jsxs)(se.p,{children:[(0,r.jsx)(se.p.Panel,{static:!0,className:(0,T.Z)("transition-[max-height,opacity] duration-700 ease-in-out overflow-hidden",{"max-h-[9999px] opacity-100":!c,"max-h-0 opacity-0":c}),children:d}),(0,r.jsx)(se.p.Panel,{static:!0,className:(0,T.Z)("transition-[max-height,opacity] duration-700 ease-in-out overflow-hidden",{"max-h-[9999px] opacity-100":c,"max-h-0 opacity-0":!c}),children:a})]})]}))})},re=function(){var e,s=b(),i=s.cart,n=s.setPaymentSession,t=s.initPayment,l=s.sameAsBilling.state;return(0,p.useEffect)((function(){var e=null;return(null===i||void 0===i?void 0:i.shipping_address)&&(null===i||void 0===i?void 0:i.payment_sessions)&&(e=setTimeout((function(){t()}),5e3)),function(){e&&clearTimeout(e)}}),[i]),(0,r.jsx)(ie,{title:"Payment",index:l?3:4,closedState:(0,r.jsx)("div",{className:"px-8 pb-8 text-small-regular",children:(0,r.jsx)("p",{children:"Enter your address to see available payment options."})}),children:(0,r.jsx)("div",{children:(null===i||void 0===i||null===(e=i.payment_sessions)||void 0===e?void 0:e.length)?i.payment_sessions.sort((function(e,s){return e.provider_id>s.provider_id?1:-1})).map((function(e){var s;return(0,r.jsx)(Y,{paymentSession:e,selected:(null===i||void 0===i||null===(s=i.payment_session)||void 0===s?void 0:s.provider_id)===e.provider_id,setSelected:function(){return n(e.provider_id)}},e.id)})):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center px-4 py-16 text-gray-900",children:(0,r.jsx)(E.Z,{})})})})},ne=i(77087),te=i(32866),le=function(e){var s,i,t=e.cart,l=(0,f.jD1)(),d=l.addShippingMethod,o=l.setCart,c=(0,j.cI)({defaultValues:{soId:null===(s=t.shipping_methods)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.shipping_option_id}}),u=c.control,x=c.setError,v=c.formState.errors,h=(0,f.xlM)(t.id,{enabled:!!t.id}),m=h.shipping_options,g=h.refetch;(0,p.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t,g]);var C=function(e,s){var i;i=e,d.mutate({option_id:i},{onSuccess:function(e){var s=e.cart;return o(s)},onError:function(){return x("soId",{type:"validate",message:"An error occurred while adding shipping. Please try again."},{shouldFocus:!0})}}),s(e)},_=(0,p.useMemo)((function(){return m&&(null===t||void 0===t?void 0:t.region)?null===m||void 0===m?void 0:m.map((function(e){return{value:e.id,label:e.name,price:(0,f.dNj)({amount:e.amount||0,region:t.region})}})):[]}),[m,t]),y=b().sameAsBilling.state;return(0,r.jsx)(ie,{index:y?2:3,title:"Delivery",closedState:(0,r.jsx)("div",{className:"px-8 pb-8 text-small-regular",children:(0,r.jsx)("p",{children:"Enter your address to see available delivery options."})}),children:(0,r.jsx)(j.Qr,{name:"soId",control:u,render:function(e){var s=e.field,i=s.value,n=s.onChange;return(0,r.jsxs)("div",{children:[(0,r.jsx)(ne.E,{value:i,onChange:function(e){return C(e,n)},children:_&&_.length?_.map((function(e){return(0,r.jsxs)(ne.E.Option,{value:e.value,className:(0,T.Z)("flex items-center justify-between text-small-regular cursor-pointer py-4 border-b border-gray-200 last:border-b-0 px-8",{"bg-gray-50":e.value===i}),children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,r.jsx)(I,{checked:i===e.value}),(0,r.jsx)("span",{className:"text-base-regular",children:e.label})]}),(0,r.jsx)("span",{className:"justify-self-end text-gray-700",children:e.price})]},e.value)})):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center px-4 py-8 text-gray-900",children:(0,r.jsx)(E.Z,{})})}),(0,r.jsx)(te.B,{errors:v,name:"soId",render:function(e){var s=e.message;return(0,r.jsx)("div",{className:"pt-2 text-rose-500 text-small-regular",children:(0,r.jsx)("span",{children:s})})}})]})}})})},ae=function(){var e=(0,f.jD1)().cart;return(null===e||void 0===e?void 0:e.id)?(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"w-full grid grid-cols-1 gap-y-8",children:[(0,r.jsx)("div",{children:(0,r.jsx)(G,{})}),(0,r.jsx)("div",{children:(0,r.jsx)(le,{cart:e})}),(0,r.jsx)("div",{children:(0,r.jsx)(re,{})})]})}):null},de=i(9787),oe=i(86037),ce=function(e){var s=e.cart,i=(0,f.jD1)(),n=i.updateCart,a=n.mutate,d=n.isLoading,o=i.setCart,c=(0,j.cI)(),u=c.register,x=c.handleSubmit,v=c.formState,h=v.touchedFields,m=v.errors,g=c.setError,C=(0,p.useMemo)((function(){var e;if(s&&(null===(e=s.gift_cards)||void 0===e?void 0:e.length))return s.gift_cards[0].code}),[s]);return(0,r.jsxs)("div",{className:"w-full bg-white p-6 flex flex-col",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("h3",{className:"text-base-semi",children:"Gift Card"})}),(0,r.jsx)("div",{className:"text-small-regular",children:C?(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-700",children:"Code: "}),(0,r.jsx)("span",{className:"font-semibold",children:C})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("button",{className:"flex items-center gap-x-2",onClick:function(){a({gift_cards:[]},{onSuccess:function(e){var s=e.cart;return o(s)}})},disabled:d,children:[(0,r.jsx)(oe.Z,{size:16}),(0,r.jsx)("span",{className:"sr-only",children:"Remove gift card from order"})]})})]}):(0,r.jsx)("form",{onSubmit:x((function(e){a({gift_cards:[{code:e.gift_card_code}]},{onSuccess:function(e){var s=e.cart;return o(s)},onError:function(){g("gift_card_code",{message:"Code is invalid"},{shouldFocus:!0})}})})),className:"w-full",children:(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_80px] gap-x-2",children:[(0,r.jsx)(z.Z,(0,l.Z)((0,t.Z)({label:"Code"},u("gift_card_code",{required:"Code is required"})),{errors:m,touched:h})),(0,r.jsx)("div",{children:(0,r.jsx)(P.Z,{className:"!min-h-[0] h-[46px] w-[80px]",disabled:d,isLoading:d,children:"Apply"})})]})})})]})},ue=i(75021),pe=function(e){var s=e.session,i=e.notReady,t=(0,p.useState)(!1),l=t[0],d=t[1],o=(0,p.useState)(!1),u=o[0],x=o[1],v=(0,p.useState)(void 0),h=v[0],m=v[1],g=(0,f.jD1)().cart,j=b().onPaymentCompleted,C=(0,c.useStripe)(),_=(0,c.useElements)(),y=null===_||void 0===_?void 0:_.getElement("cardNumber");(0,p.useEffect)((function(){d(!C||!_)}),[C,_]);var Z=function(){var e=(0,n.Z)((function(){var e,i,r,n,t,l,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return x(!0),C&&_&&y&&g?[4,C.confirmCardPayment(s.data.client_secret,{payment_method:{card:y,billing_details:{name:g.billing_address.first_name+" "+g.billing_address.last_name,address:{city:null!==(e=g.billing_address.city)&&void 0!==e?e:void 0,country:null!==(i=g.billing_address.country_code)&&void 0!==i?i:void 0,line1:null!==(r=g.billing_address.address_1)&&void 0!==r?r:void 0,line2:null!==(n=g.billing_address.address_2)&&void 0!==n?n:void 0,postal_code:null!==(t=g.billing_address.postal_code)&&void 0!==t?t:void 0,state:null!==(l=g.billing_address.province)&&void 0!==l?l:void 0},email:g.email,phone:null!==(d=g.billing_address.phone)&&void 0!==d?d:void 0}}}).then((function(e){var s=e.error,i=e.paymentIntent;if(s){var r=s.payment_intent;return(r&&"requires_capture"===r.status||r&&"succeeded"===r.status)&&j(),void m(s.message)}if(i&&"requires_capture"===i.status||"succeeded"===i.status)return j()})).finally((function(){x(!1)}))]:(x(!1),[2]);case 1:return a.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Z,{disabled:u||l||i,onClick:Z,children:u?(0,r.jsx)(E.Z,{}):"Checkout"}),h&&(0,r.jsx)("div",{className:"text-red-500 text-small-regular mt-2",children:h})]})},xe=function(e){var s=e.session,i=e.notReady,t=(0,p.useState)(!1),l=t[0],d=t[1],o=(0,p.useState)(void 0),c=o[0],u=o[1],x=(0,f.jD1)().cart,v=b().onPaymentCompleted,h=function(){var e=(0,n.Z)((function(e,s){var i;return(0,a.__generator)(this,(function(e){return null===s||void 0===s||null===(i=s.order)||void 0===i||i.authorize().then((function(e){"COMPLETED"===e.status?v():u("An error occurred, status: ".concat(e.status))})).catch((function(){u("An unknown error occurred, please try again.")})).finally((function(){d(!1)})),[2]}))}));return function(s,i){return e.apply(this,arguments)}}();return(0,r.jsxs)(ue.Vv,{options:{"client-id":"",currency:null===x||void 0===x?void 0:x.region.currency_code.toUpperCase(),intent:"authorize"},children:[c&&(0,r.jsx)("span",{className:"text-rose-500 mt-4",children:c}),(0,r.jsx)(ue.ch,{style:{layout:"horizontal"},createOrder:(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){return[2,s.data.id]}))})),onApprove:h,disabled:i||l})]})},ve=function(e){var s=e.notReady,i=(0,p.useState)(!1),n=i[0],t=i[1],l=b().onPaymentCompleted;return(0,r.jsx)(P.Z,{disabled:n||s,onClick:function(){t(!0),l(),t(!1)},children:n?(0,r.jsx)(E.Z,{}):"Checkout"})},he=function(e){var s=e.paymentSession,i=(0,p.useState)(!0),n=i[0],t=i[1],l=(0,f.jD1)().cart;switch((0,p.useEffect)((function(){t(!0),l&&l.shipping_address&&l.billing_address&&l.email&&(l.shipping_methods.length<1||t(!1))}),[l]),null===s||void 0===s?void 0:s.provider_id){case"stripe":return(0,r.jsx)(pe,{session:s,notReady:n});case"manual":return(0,r.jsx)(ve,{notReady:n});case"paypal":return(0,r.jsx)(xe,{notReady:n,session:s});default:return(0,r.jsx)(P.Z,{disabled:!0,children:"Select a payment method"})}},me=i(89581),fe=function(){var e=(0,f.jD1)().cart;return(null===e||void 0===e?void 0:e.id)?(0,r.jsxs)("div",{className:"sticky top-0 flex flex-col-reverse small:flex-col gap-y-8",children:[(0,r.jsxs)("div",{className:"w-full bg-white p-6 flex flex-col gap-y-6",children:[(0,r.jsx)(me.Z,{cart:e}),(0,r.jsx)(he,{paymentSession:null===e||void 0===e?void 0:e.payment_session})]}),(0,r.jsx)("div",{className:"p-6 bg-white",children:(0,r.jsx)(de.Z,{cart:e})}),(0,r.jsx)(ce,{cart:e})]}):null},ge=function(){return(0,r.jsx)(y,{children:(0,r.jsxs)("div",{className:"bg-gray-100 relative small:min-h-screen",children:[(0,r.jsx)("div",{className:"h-16 bg-white",children:(0,r.jsxs)("nav",{className:"flex items-center h-full justify-between content-container",children:[(0,r.jsx)(S(),{href:"/cart",children:(0,r.jsxs)("a",{className:"text-small-semi text-gray-700 flex items-center gap-x-2 uppercase flex-1 basis-0",children:[(0,r.jsx)(N.Z,{className:"rotate-90",size:16}),(0,r.jsx)("span",{className:"mt-px hidden small:block",children:"Back to shopping cart"}),(0,r.jsx)("span",{className:"mt-px block small:hidden",children:"Back"})]})}),(0,r.jsx)(S(),{href:"/",children:(0,r.jsx)("a",{className:"text-xl-semi",children:"ACME"})}),(0,r.jsx)("div",{className:"flex-1 basis-0"})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(H,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 small:grid-cols-[1fr_416px] gap-y-8 content-container gap-x-8 py-12",children:[(0,r.jsx)(ae,{}),(0,r.jsx)(fe,{})]})]}),(0,r.jsx)("div",{className:"py-4 w-full flex items-center justify-center",children:(0,r.jsx)(w.Z,{})})]})})},je=i(63269),Ce=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(je.Z,{title:"Checkout"}),(0,r.jsx)(ge,{})]})}}},function(e){e.O(0,[662,415,866,74,989,774,888,179],(function(){return s=57250,e(e.s=s);var s}));var s=e.O();_N_E=s}]);